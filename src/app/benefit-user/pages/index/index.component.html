<div class="row mt-5">
  <div class="col">

    <form [formGroup]="viewBenefitUser">
      <div class="row p-3">

        <div class="col-3">
          <div class=" input-group">
            <label class="input-group-text" for="years">Año</label>
            <select class="form-select" formControlName="years" (change)="getBenefitDetail($event)">
              <option *ngFor="let year of years" value="{{ year }}">{{ year }}
              </option>
            </select>
          </div>
        </div>

        <div class="col-9">
          <div class=" input-group">
            <label class="input-group-text" for="user">Colaborador</label>
            <select class="form-select" formControlName="users" (change)="getBenefitDetail($event)">

              <option value=" {{ user?.id }}">
                {{user?.name}}
              </option>

              <option *ngFor="let user of user?.subordinates" value=" {{ user.id }}">
                {{user.name}}
              </option>

            </select>
          </div>
        </div>
      </div>
    </form>

  </div>
</div>

<div *ngIf="viewBenefitUser.valid; then newBenefitDetailTemplate"></div>
<hr>

<div class="row p-3">
  <h2>Calendario de beneficios MiViernes - Mis colaboradores</h2>
</div>




<div class="row pb-3">
  <calendar-component [data]="calendarData"></calendar-component>
</div>


<!-- Templates -->

<ng-template #newBenefitDetailTemplate>

  <hr>

  <div class="row shadow rounded mb-3">
    <div class="row p-3">
      <h2>Detalle de beneficios de {{ currentUserBenefits?.name }}</h2>
    </div>


    <div *ngFor="let benefit of benefits" class="input-group mb-3">

      <div [ngSwitch]="benefit.name" class="input-group-text" style="width: 20%;">
        <img *ngSwitchCase="'Mi Cumpleaños'" src="./assets/images/cumpleaños.svg" width="100%;">
        <img *ngSwitchCase="'Mi Banco de Horas'" src="./assets/images/banco_horas.svg" width="100%;">
        <img *ngSwitchCase="'Mi Horario Flexible'" src="./assets/images/horario_flexible.svg" width="100%;">
        <img *ngSwitchCase="'Mi Viernes'" src="./assets/images/mi_viernes.svg" width="100%;">
        <img *ngSwitchCase="'Tiempo para el Viajero'" src="./assets/images/tiempo_viajero.svg" width="100%;">
      </div>

      <div class="form-control">
        <div class="card-header">
          {{ benefit.name }}
        </div>
        <ul class="list-group list-group-flush" [innerHTML]="selectBenefit(benefit.id!)"></ul>
      </div>

      <div *ngIf="benefit.name === 'Mi Banco de Horas'" class="input-group-text" style="width: 25%;">
        <doughnut-chart-component [totalBancoHoras]="totalBancoHoras"></doughnut-chart-component>
      </div>

    </div>

  </div>


</ng-template>
